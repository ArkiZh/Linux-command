查看文件夹大小
####################################

在 Linux 中使用 ``ls -l`` 命令列出的目录内容中，文件夹的大小默认仅显示 4KB，这是用来存储文件夹的元数据的大小。

那么如何在终端中获取文件夹的大小呢？

- du 查看文件夹大小
- df 查看磁盘使用情况


du 命令
************************************

du（Disk Usage）命令表示磁盘使用率。这是一个标准的 Unix 程序，用于估计当前工作目录中的文件空间使用情况。

它默认使用递归方式总结磁盘使用情况，以获取目录及其子目录的大小。

du 常用的选项：

===============     ===============
选项                 说明
===============     ===============
-s                   只显示总计的文件大小
-h                   显示时以K，M，G为单位，提高信息的可读性
-S                   显示时并不含其子文件夹的大小
--max-depth=N        显示子文件夹的深度（层级）
===============     ===============

.. highlight:: none

::

    [gavin:docs/]$ ls
    Chapter01  Chapter03  Chapter05  Chapter07  index.rst    TOC
    Chapter02  Chapter04  Chapter06  Images     preface.rst

    # 默认显示
    [gavin:docs/]$ du
    1740    ./Images
    184     ./Chapter01
    16      ./Chapter05
    32      ./Chapter03
    52      ./Chapter06
    32      ./TOC
    12      ./Chapter07/shell 内部命令
    32      ./Chapter07/images
    96      ./Chapter07
    92      ./Chapter04
    108     ./Chapter02
    2364    .

    # 以人类可读的方式显示
    [gavin:docs/]$ du -h
    1.7M    ./Images
    192K    ./Chapter01
    16K     ./Chapter05
    32K     ./Chapter03
    52K     ./Chapter06
    32K     ./TOC
    12K     ./Chapter07/shell 内部命令
    32K     ./Chapter07/images
    96K     ./Chapter07
    92K     ./Chapter04
    108K    ./Chapter02
    2.4M    .
    
    # 按大小排列
    xiao@xiao:docs$ du -h | sort -nr

    # 只显示 Images 文件夹的大小
    xiao@xiao:docs$ du -h Images/
    1.7M    Images/

    # 只显示当前文件夹的总大小
    [gavin:docs/]$ du -hs
    2.4M    .

    # 显示文件夹大小时不包含子文件夹的大小
    [gavin:docs/]$ du -hS
    1.7M    ./Images
    196K    ./Chapter01
    16K     ./Chapter05
    32K     ./Chapter03
    52K     ./Chapter06
    32K     ./TOC
    12K     ./Chapter07/shell 内部命令
    32K     ./Chapter07/images
    52K     ./Chapter07
    92K     ./Chapter04
    108K    ./Chapter02
    12K     .

    # 显示 2 级文件夹的深度
    [gavin:docs/]$ du -h --max-depth=2 ../docs/
    1.7M    ../docs/Images
    200K    ../docs/Chapter01
    16K     ../docs/Chapter05
    32K     ../docs/Chapter03
    52K     ../docs/Chapter06
    32K     ../docs/TOC
    12K     ../docs/Chapter07/shell.type.rst
    32K     ../docs/Chapter07/images
    96K     ../docs/Chapter07
    92K     ../docs/Chapter04
    108K    ../docs/Chapter02
    2.4M    ../docs/

    # 文件夹的深度从 0 级开始
    [gavin:docs/]$ du -h --max-depth=0 ../docs/
    2.4M    ../docs/


df 命令
************************************

df命令用于显示磁盘分区上的可使用的磁盘空间。默认显示单位为KB。可以利用该命令来获取硬盘被占用了多少空间，目前还剩下多少空间等信息。

最常用的选项示例：

::

    # 默认显示所有挂载的磁盘
    [gavin:/home/]$ df
    文件系统          1K-块     已用     可用 已用% 挂载点
    udev            3975328        0  3975328    0% /dev
    tmpfs            799028     9516   789512    2% /run
    /dev/mmcblk0p3 21977248 12651688  8186104   61% /
    tmpfs           3995128   120492  3874636    4% /dev/shm
    tmpfs              5120        4     5116    1% /run/lock
    tmpfs           3995128        0  3995128    0% /sys/fs/cgroup
    /dev/mmcblk0p4 95569324 10825896 79845740   12% /home/xiao/Videos/vlc
    /dev/mmcblk0p1    94759     5199    89560    6% /boot/efi
    tmpfs            799024       20   799004    1% /run/user/1000

    # 以更可读的方式显示
    [gavin:/home/]$ df -h
    文件系统        容量  已用  可用 已用% 挂载点
    udev            3.8G     0  3.8G    0% /dev
    tmpfs           781M  9.3M  772M    2% /run
    /dev/mmcblk0p3   21G   13G  7.9G   61% /
    tmpfs           3.9G  118M  3.7G    4% /dev/shm
    tmpfs           5.0M  4.0K  5.0M    1% /run/lock
    tmpfs           3.9G     0  3.9G    0% /sys/fs/cgroup
    /dev/mmcblk0p4   92G   11G   77G   12% /home/xiao/Videos/vlc
    /dev/mmcblk0p1   93M  5.1M   88M    6% /boot/efi
    tmpfs           781M   20K  781M    1% /run/user/1000

    # 查看全部文件系统
    [gavin:/home/]$ df -a
    文件系统          1K-块     已用     可用 已用% 挂载点
    sysfs                 0        0        0     - /sys
    proc                  0        0        0     - /proc
    udev            3975328        0  3975328    0% /dev
    devpts                0        0        0     - /dev/pts
    tmpfs            799028     9516   789512    2% /run
    /dev/mmcblk0p3 21977248 12651684  8186108   61% /
    securityfs            0        0        0     - /sys/kernel/security
    tmpfs           3995128   120492  3874636    4% /dev/shm
    tmpfs              5120        4     5116    1% /run/lock
    tmpfs           3995128        0  3995128    0% /sys/fs/cgroup
    cgroup2               0        0        0     - /sys/fs/cgroup/unified
    cgroup                0        0        0     - /sys/fs/cgroup/systemd
    pstore                0        0        0     - /sys/fs/pstore
    efivarfs              0        0        0     - /sys/firmware/efi/efivars
    bpf                   0        0        0     - /sys/fs/bpf
    cgroup                0        0        0     - /sys/fs/cgroup/pids
    cgroup                0        0        0     - /sys/fs/cgroup/rdma
    /dev/mmcblk0p4 95569324 10825896 79845740   12% /home/xiao/Videos/vlc
    /dev/mmcblk0p1    94759     5199    89560    6% /boot/efi
    tmpfs            799024       20   799004    1% /run/user/1000
    ...
